## Цели задания

- [ ] Создание веб-приложения на FastAPI с применением S3-совместимого хранилища
- [ ] Обеспечение обработки ошибок и валидации данных
- [ ] Использование Swagger/OpenAPI для документирования API
- [ ] Написание тестов для проверки основной функциональности
- [ ] Readme
- [ ] Дробление проекта на отдельные сервисы
- [ ] Создание docker-cmpose.yaml для запуска проекта

## Выполнено

- [x] Реализовано веб-приложение на Fastapi с применением Minio в качестве S3-хранилища и Postgreql в качестве базы данных.
  - Для установки зависимостей используйте команду `pip install -r requirements.txt`. Рекомендуется использовать виртуальное окружение.
  - Для работы с postgres использую движок ***psycopg2***. В случае проблем с установкой рекомендую установить ***psycopg2-binary***.
  - Реализованная функциональность согласно заданию:
    - **GET /memes/:** Получает список всех мемов с пагинацией
    - **GET /memes/{meme_id}:** Получает конкретный мем по его ID
    - **POST /memes/:** Добавляет новый мем с заголовком, текстом и картинкой
    - **PUT /memes/{meme_id}/:** Обновляет существующий мем
    - **DELETE /memes/{meme_id}/:** Удаляет мем
  - Дополнительно реализованы:
    - **GET /:** Переадрисовывает корневой муршрут на вкладку /memes/. Нужно для удобства отображения фронтенда.
    - **POST /meme/{meme_id}/:** Реализует метод **PUT /memes/{meme_id}/** при работе с формой в html-шаблоне. Передаётся параметр **method** со значением **PUT**, в ином случае возврашается ошибка **Method not allowed**
  - Созданы две модели в базе данных с использованием SQLAlchemy:
    - **File:** Хранит имя файла и ссылку для его получения из S3-хранилища
    - **Meme:** Хранит заголовок и описание мема, а также связанную модель File. Отношение Meme к File - много к одному.
  - Написан фронтенд с рендерингом на сервере для визуализации и удобаства взаимодействия с сервисом.
- [x] Валидация данных обеспечена Pydantic моделями и логикой внутри контроллеров конструкциями **try - except** _(смотри папки **schemas** и **view**)_.
- [x] Для использования Swagger/OpenAPI используются ссылки ***/docs*** и ***/redoc*** добавленные к основному url
- [x] Написаны тесты с применением ***pytest*** _(смотри папку **test_app**)_. В тестах использую фикстуры для подготовки данных перед тестами. Тестируются все методы для работы с базой данных и s3-хранилищем. Для запуска тестов используйте команду `pytest --disable-warnings -v`.
- [x] Написан данный Readme с описанием функционала и выполненных задач.
- [x] Реализован сервис с публичным API для работы с мемами. Функционал для работы с изображениями скрыт внутри сервиса. Также реализован сервис для работы с postgres и сервис для работы с minio.
- [x] Написан ***docker-compose.yaml*** для запуска всех указанных сервисов и контейниризации основного приложения.

## Запуск приложения

- Для запуска приложения выполните команду `docker compose up -d api`
- Для отдельного запуска сервисов postgres и minio используйте команды `docker compose up -d pg` и `docker compose up -d minio` соответственно.
- Для локального запуска приложения используйте команду `fastapi dev main.py` для работы в development режиме. Используйте команду `uvicorn main:app --host 0.0.0.0 --port 8000` для работы в продакшене.
- Для работы с minio добавьте запись `127.0.0.1 minio` в файл ***hosts*** вашей операционной системы.